# Cognitive Load Analyzer

## 概要 (Overview)

このAnkiアドオンは、認知科学の原則に基づき、学習者にとって過度な認知的負荷となっている可能性のあるカードを特定し、学習効率の改善を支援します。

「失敗したか」だけでなく、「思い出すのに時間がかかっていないか（想起の流暢性）」や「定着したはずの知識を忘れていないか（学習段階）」といった多角的な観点からカードを分析します。

## 主な機能 (Features)

- **高度なスコア分析:** 認知科学の知見に基づいた独自の「認知的負荷スコア」を算出します。
- **困難なカードのリストアップ:** スコアの高い順にカードをリスト表示し、問題のあるカードを簡単に見つけ出せます。
- **シームレスな編集:** リストアップされたカードをダブルクリックすると、即座にAnkiのカード編集画面を開くことができます。

## 使用方法 (How to Use)

1.  Ankiのメイン画面上部にあるメニューから `ツール` > `Cognitive Load Analyzer` を選択します。
2.  アドオンのウィンドウが開いたら、「分析実行」ボタンをクリックします。
3.  分析が完了すると、スコアの高い順にカードがリスト表示されます。
4.  修正したいカードを見つけたら、その行をダブルクリックして編集を行ってください。

## スコア計算式の科学的根拠

本アドオンが算出する「認知的負荷スコア」は、学習における「つまずき」の3大要素を網羅的に測定することを目指しています。分析対象は**レビュー回数が5回以上**のカードに限定され、学習初期のノイズが排除されます。

**スコア = (失敗の深刻度) + (主観的な困難度) + (想起の流暢性)**

---

### 1. 失敗の深刻度 (Severity of Failure)
> `(失敗率 * 50) * log(インターバル + 2)`

**科学的根拠：学習段階 (Learning Phase)**

学習初期の失敗と、一度長期記憶に定着したはずの知識の失敗では、その意味合いが大きく異なります。この計算式では、カードの**インターバルが長い（成熟した）**ほど、一度の失敗がスコアに与える影響が対数的に大きくなります。これにより、「覚えていたはずなのに忘れてしまった」という、より深刻な問題を抱えるカードを優先的に特定します。

---

### 2. 主観的な困難度 (Subjective Difficulty)
> `((2500 - 易しさ) / 100) * 5`

**科学的根拠：メタ認知 (Metacognition)**

Ankiの「易しさ（Ease Factor）」は、ユーザーがそのカードをどれだけ難しいと感じたかの主観的な指標です。易しさが低いカードは、ユーザー自身が繰り返し「難しい」と判断したカードであり、内容の抜本的な見直しが必要な可能性があります。

---

### 3. 想起の流暢性 (Retrieval Fluency)
> `log(平均レビュー時間[秒] + 1) * 20`

**科学的根拠：処理流暢性 (Processing Fluency)**

記憶の強さは、正解できたかどうかだけでなく、「どれだけ速く、スムーズに思い出せたか」も重要な指標です。この計算式では、レビュー時間の影響を**対数（log）** で評価します。これにより、極端に長いレビュー時間の影響が緩和され、他の要素とのバランスが取れた、より現実に即した評価が可能になります。

## 変更履歴 (Changelog)

### v1.1.6 (2025-11-14)
- **機能改善:** スコア計算式を改善し、「レビュー時間」の影響を対数スケールで評価するように変更しました。これにより、スコアのバランスが向上し、より総合的な観点から困難なカードを特定できるようになりました。

### v1.1.5 (2025-11-14)
- **機能改善:** 分析対象を「レビュー回数5回以上」のカードに限定し、学習初期のノイズを排除して分析精度を向上させました。

### v1.1.4 (2025-11-14)
- **UI/UX改善:** アドオンのウィンドウを、他のAnkiウィンドウと並行して使えるようにしました（ノンモーダル化）。カード編集時にウィンドウが閉じず、背面に残るようになりました。

### v1.1.3 (2025-11-13)
- **UI/UX改善:** カード編集時に、アドオンのウィンドウが自動的に閉じるように修正しました。これにより、Ankiのブラウザウィンドウへスムーズに操作を移行できます。

### v1.1.2 (2025-11-13)
- **修正:** カード編集機能を使用する際に発生していた検索エラー (`SearchError`) を修正しました。

### v1.1.1 (2025-11-13)
- **技術的改善:** カード編集機能をAnki公式のヘルパー関数(`dialogs.open`)を使用するようリファクタリングし、将来のAnkiバージョンとの互換性を向上させました。

# Cognitive Load Analyzer

## 概要 (Overview)

このAnkiアドオンは、認知科学の原則に基づき、学習者にとって過度な認知的負荷となっている可能性のあるカードを特定し、学習効率の改善を支援します。

「失敗したか」だけでなく、「思い出すのに時間がかかっていないか（想起の流暢性）」や「定着したはずの知識を忘れていないか（学習段階）」といった多角的な観点からカードを分析します。

## 主な機能 (Features)

- **高度なスコア分析:** 認知科学の知見に基づいた独自の「認知的負荷スコア」を算出します。
- **困難なカードのリストアップ:** スコアの高い順にカードをリスト表示し、問題のあるカードを簡単に見つけ出せます。
- **シームレスな編集:** リストアップされたカードをダブルクリックするだけで、即座にAnkiのカード編集画面を開くことができます。

## 使用方法 (How to Use)

1.  Ankiのメイン画面上部にあるメニューから `ツール` > `Cognitive Load Analyzer` を選択します。
2.  アドオンのウィンドウが開いたら、「分析実行」ボタンをクリックします。
3.  分析が完了すると、スコアの高い順にカードがリスト表示されます。
4.  修正したいカードを見つけたら、その行をダブルクリックして編集を行ってください。

## スコア計算式の科学的根拠

本アドオンが算出する「認知的負荷スコア」は、学習における「つまずき」の3大要素を網羅的に測定することを目指しています。

**スコア = (失敗の深刻度) + (主観的な困難度) + (想起の流暢性)**

---

### 1. 失敗の深刻度 (Severity of Failure)
> `(失敗率 * 50) * log(インターバル + 2)`

**科学的根拠：学習段階 (Learning Phase)**

学習初期の失敗と、一度長期記憶に定着したはずの知識の失敗では、その意味合いが大きく異なります。この計算式では、カードの**インターバルが長い（成熟した）**ほど、一度の失敗がスコアに与える影響が対数的に大きくなります。これにより、「覚えていたはずなのに忘れてしまった」という、より深刻な問題を抱えるカードを優先的に特定します。

---

### 2. 主観的な困難度 (Subjective Difficulty)
> `((2500 - 易しさ) / 100) * 5`

**科学的根拠：メタ認知 (Metacognition)**

Ankiの「易しさ（Ease Factor）」は、ユーザーがそのカードをどれだけ難しいと感じたかの主観的な指標です。易しさが低いカードは、ユーザー自身が繰り返し「難しい」と判断したカードであり、内容の抜本的な見直しが必要な可能性があります。

---

### 3. 想起の流暢性 (Retrieval Fluency)
> `(平均レビュー時間[秒]) * 10`

**科学的根拠：処理流暢性 (Processing Fluency)**

記憶の強さは、正解できたかどうかだけでなく、「どれだけ速く、スムーズに思い出せたか」も重要な指標です。たとえ正解していても、思い出すのに時間がかかっているカードは記憶の定着が弱い状態です。この指標は、そのような「隠れた」困難カードを発見するのに役立ちます。

## 変更履歴 (Changelog)

### v1.1.2 (2025-11-13)
- **修正:** カード編集機能を使用する際に発生していた検索エラー (`SearchError`) を修正しました。

### v1.1.1 (2025-11-13)
- **技術的改善:** カード編集機能をAnki公式のヘルパー関数(`dialogs.open`)を使用するようリファクタリングし、将来のAnkiバージョンとの互換性を向上させました。

### v1.1.0 (2025-11-13)
- **機能改善:** 認知科学の知見に基づき、スコア計算式を大幅に改善しました。
  - 「レビュー時間」を評価に加え、「想起の流暢性」を測定できるようになりました。
  - 「インターバル」に応じて失敗の重みを変え、「学習の段階」を考慮できるようになりました。
- **UI改善:** スコアの内訳がわかるように「平均レビュー時間」と「インターバル」を結果テーブルに追加しました。

### v1.0.2 (2025-11-13)
- **機能改善:** 分析対象を「失敗したことがあるカード」から「すべてのカード」に拡大し、より包括的な分析を可能にしました。

### v1.0.1 (2025-11-13)
- **修正:** カード編集機能が特定のAnkiバージョンで動作しない問題を修正しました (`AttributeError: 'Collection' object has no attribute 'col'`)。

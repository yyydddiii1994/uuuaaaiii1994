# LECTOR-TS: 次世代・内容認識型Ankiスケジューリングアドオン

LECTOR-TSは、Ankiのための先進的なスケジューリング・アルゴリズムを提供するアドオンです。従来のアルゴリズム（SM-2, FSRS）がカードのレビュー履歴（正解/不正解）のみに依存していたのに対し、LECTOR-TSはカードの**「内容」**そのものと、レビューが行われた**「文脈」**をディープラーニングで分析し、あなた個人の記憶パターンに最適化された、真にパーソナルな学習スケジュールを構築します。

## 主な機能

- **内容認識スケジューリング**:
  - 大規模言語モデル（LLM）の技術を活用し、カードのテキスト内容を分析します。
  - 「"JFKの暗殺年?" (1963)」と「"ケルティックの欧州杯優勝年?" (1967)」のような、意味的に類似し混同しやすいカードペアを自動で特定。これらのカードが記憶の干渉を起こさないよう、最適な間隔で出題します。

- **文脈依存スケジューリング**:
  - レビュー履歴を時系列データとして解析します。
  - 睡眠による記憶定着（システム統合）の効果をモデル化。「睡眠を挟んだ後」のレビューは、より記憶に定着しやすいと判断し、スケジュールに反映させます。
  - 短時間での連続学習（学習セッション）が記憶に与える負荷も考慮します。

- **オンデバイス・パーソナライズ**:
  - 「圧倒的に最適化！」ボタンを押すと、あなたのAnkiの全レビュー履歴とカード内容を使い、あなたのPC上で、あなた専用のスケジューリングAIモデルをファインチューニングします。
  - 計算にはNVIDIA製GPU（CUDA）またはApple Silicon（MPS）が活用され、ハイスペックなマシンほど高速に最適化が完了します。

## 導入要件

- **Anki**: バージョン 2.1.50 以上を推奨
- **OS**: Windows, macOS, Linux
- **ハードウェア**:
  - **推奨**: NVIDIA GeForce RTX 30シリーズ / 40シリーズなどの、VRAM 8GB以上のCUDA対応GPU。
  - **互換**: Apple Silicon (M1/M2/M3)搭載のMac。
  - CPUのみでも動作しますが、最適化計算に非常に長い時間がかかる可能性があります。
- **Python**: (インストーラーを使用する場合は不要)
- **インターネット接続**: 初回インストール時に、数GBの依存ライブラリをダウンロードするために必要です。

## インストール方法

本アドオンは、専用のGUIインストーラーを使って簡単に導入できます。

1.  このプロジェクトをダウンロードまたは`git clone`します。
2.  `install_gui.py`を実行します (`python install_gui.py`)。
3.  表示されたウィンドウの「**LECTOR-TSをAnkiにインストール！**」ボタンをクリックします。
4.  進捗ログに`torch`などのライブラリのダウンロード状況が表示されます。完了まで数分〜数十分お待ちください。
5.  進捗ログに「インストールが正常に完了しました。」と表示されれば成功です。
6.  Ankiを再起動してください。

## 使用方法

1.  **Ankiを起動**します。
2.  メインウィンドウ上部のメニューから `ツール` > `LECTOR-TS Optimizer...` を選択します。
3.  設定ウィンドウが表示されたら、「**圧倒的に最適化！ (ローカルGPUを使用)**」ボタンをクリックします。
4.  最適化プロセスが開始されます。進捗はウィンドウ内のステータスラベルに表示されます。処理には数分〜数十分かかる場合があります。
5.  「完了！パーソナライズドモデルが構築されました。」と表示されたら、最適化は成功です。ウィンドウを閉じてください。

この瞬間から、あなたのAnkiのスケジューリングは、LECTOR-TSによってパーソナライズされたものに置き換わります。いつも通りに学習を続けてください。

## トラブルシューティング

### インストーラーが起動しない場合 (`install_gui.py`が実行できない)

`install_gui.py`を実行しようとしてもウィンドウが表示されず、すぐに終了してしまう場合、GUIの初期化段階で問題が発生している可能性があります。

このような状況に備え、インストーラーはエラーの詳細を自動的にファイルに記録します。

1.  `install_gui.py`と同じフォルダ内に、`エラーログ.txt`というファイルが生成されていないか確認してください。
2.  もしファイルが存在する場合、その内容を確認することで、問題の原因（例: Python環境の問題、特定のライブラリの欠如など）を特定できる場合があります。
3.  開発者に問題を報告する際は、この`エラーログ.txt`の内容を添付していただくと、スムーズな問題解決に繋がります。
